{"remainingRequest":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\src\\views\\personaloa\\startprocess.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\src\\views\\personaloa\\startprocess.vue","mtime":1596417159353},{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IHF1ZXJ5UHJvY2Vzc0RlZmluaXRpb24sIHF1ZXJ5VXNlcm5hbWUsIGdldFByb2Nlc3NSZXNvdXJjZSwgc3RhcnRQcm9jZXNzSW5zdGFuY2UgfSBmcm9tICdAL2FwaS9hY3Rpdml0aScKaW1wb3J0IHdhdmVzIGZyb20gJ0AvZGlyZWN0aXZlL3dhdmVzJyAvLyB3YXZlcyBkaXJlY3RpdmUKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24nIC8vIHNlY29uZGFyeSBwYWNrYWdlIGJhc2VkIG9uIGVsLXBhZ2luYXRpb24KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3RhcnRQcm9jZXNzJywKICBjb21wb25lbnRzOiB7IFBhZ2luYXRpb24gfSwKICBkaXJlY3RpdmVzOiB7IHdhdmVzIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlS2V5OiAwLAogICAgICBsaXN0OiBbXSwKICAgICAgdG90YWw6IDAsCiAgICAgIGxpc3RMb2FkaW5nOiB0cnVlLAogICAgICBsaXN0UXVlcnk6IHsKICAgICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgcHJvY2Vzc0RlZmluaXRpb25OYW1lOiB1bmRlZmluZWQKICAgICAgfSwKICAgICAgY2FuZGlkYXRlT3B0aW9uczogW10sCiAgICAgIHRlbXA6IHsKICAgICAgICBpZDogdW5kZWZpbmVkCiAgICAgIH0sCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgcHJldmlld0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzdmdTcmM6ICcnLAogICAgICBkaWFsb2dTdGF0dXM6ICcnLAogICAgICB0ZXh0TWFwOiB7CiAgICAgICAgc3RhcnQ6IHRoaXMuJHQoJ3JvdXRlLnN0YXJ0cHJvY2VzcycpCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgY2FuZGlkYXRlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgncHJvY2Vzcy5wcm9jZXNzQ2FuZGlkYXRlLXJlcXVpcmVkJyksIHRyaWdnZXI6ICdjaGFuZ2UnIH1dLAogICAgICAgIHJhbmdlVGltZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2Nlc3MucHJvY2Vzc1JhbmdldGltZS1yZXF1aXJlZCcpLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XSwKICAgICAgICBkZXNjcmlwdGlvbjogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2Nlc3MucHJvY2Vzc0Rlc2NyaXB0aW9uLXJlcXVpcmVkJyksIHRyaWdnZXI6ICdibHVyJyB9XQogICAgICB9LAogICAgICBkb3dubG9hZExvYWRpbmc6IGZhbHNlCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlCiAgICAgIHF1ZXJ5UHJvY2Vzc0RlZmluaXRpb24odGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdAogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24udG90YWwKICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVGaWx0ZXIoKSB7CiAgICAgIHRoaXMubGlzdFF1ZXJ5LmN1cnJlbnRQYWdlID0gMQogICAgICB0aGlzLmdldExpc3QoKQogICAgfSwKICAgIGhhbmRsZVJlc2V0KCkgewogICAgICB0aGlzLmxpc3RRdWVyeS5wcm9jZXNzRGVmaW5pdGlvbk5hbWUgPSAnJwogICAgICB0aGlzLmhhbmRsZUZpbHRlcigpCiAgICB9LAogICAgaGFuZGxlU3RhcnQocm93KSB7CiAgICAgIHRoaXMudGVtcCA9IE9iamVjdC5hc3NpZ24oe30sIHJvdykgLy8gY29weSBvYmoKICAgICAgdGhpcy5kaWFsb2dTdGF0dXMgPSAnc3RhcnQnCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLmNsZWFyVmFsaWRhdGUoKQogICAgICB9KQogICAgICBxdWVyeVVzZXJuYW1lKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5jYW5kaWRhdGVPcHRpb25zID0gcmVzcG9uc2UuZGF0YQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVByZXZpZXcocm93KSB7CiAgICAgIHRoaXMucHJldmlld0RpYWxvZ1Zpc2libGUgPSB0cnVlCiAgICAgIGdldFByb2Nlc3NSZXNvdXJjZShyb3cuZGVwbG95bWVudElkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLnN2Z1NyYyA9IHJlc3BvbnNlCiAgICAgIH0pCiAgICB9LAogICAgc3RhcnREYXRhKCkgewogICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgLy8gY29uc3QgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLnRlbXApCiAgICAgICAgICBjb25zdCB0ZW1wRGF0YSA9IHt9CiAgICAgICAgICB0ZW1wRGF0YS5jYW5kaWRhdGUgPSB0aGlzLnRlbXAuY2FuZGlkYXRlCiAgICAgICAgICB0ZW1wRGF0YS5zdGFydFRpbWUgPSB0aGlzLnRlbXAucmFuZ2VUaW1lID8gdGhpcy50ZW1wLnJhbmdlVGltZVswXSA6IG51bGwKICAgICAgICAgIHRlbXBEYXRhLmVuZFRpbWUgPSB0aGlzLnRlbXAucmFuZ2VUaW1lID8gdGhpcy50ZW1wLnJhbmdlVGltZVsxXSA6IG51bGwKICAgICAgICAgIHRlbXBEYXRhLmRlc2NyaXB0aW9uID0gdGhpcy50ZW1wLmRlc2NyaXB0aW9uCiAgICAgICAgICB0ZW1wRGF0YS5jdXN0b21Gb3JtID0gW10KICAgICAgICAgIHRlbXBEYXRhLnByb2Nlc3NEZWZpbml0aW9uSWQgPSB0aGlzLnRlbXAuaWQKICAgICAgICAgIHN0YXJ0UHJvY2Vzc0luc3RhbmNlKHRlbXBEYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm1lc3NhZ2UgPT09ICdzdWNjZXNzJykgewogICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgICB0aXRsZTogdGhpcy4kdCgnY29tbW9uLnN1Y2Nlc3MnKSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ3Byb2Nlc3Muc3RhcnRTdWNjZXNzJyksCiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMjAwMAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5oYW5kbGVXYXJuaW5nKHJlc3BvbnNlKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVXYXJuaW5nKHJlc3BvbnNlKSB7CiAgICAgIHRoaXMuJG5vdGlmeSh7CiAgICAgICAgdGl0bGU6IHRoaXMuJHQoJ2NvbW1vbi53YXJuaW5nJyksCiAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZSwKICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["startprocess.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"startprocess.vue","sourceRoot":"src/views/personaloa","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.processDefinitionName\" :placeholder=\"$t('process.processDefinitionName')\" clearable style=\"width: 200px;\" class=\"filter-item\" @keyup.enter.native=\"handleFilter\" />\n      <el-button v-waves class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">\n        {{ $t('common.query') }}\n      </el-button>\n      <el-button v-waves class=\"filter-item\" type=\"primary\" icon=\"el-icon-refresh-right\" @click=\"handleReset\">\n        {{ $t('common.reset') }}\n      </el-button>\n    </div>\n\n    <el-table\n      :key=\"tableKey\"\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      border\n      fit\n      highlight-current-row\n      style=\"width: 100%;\"\n    >\n      <el-table-column :label=\"$t('process.processDefinitionKey')\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.key }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column :label=\"$t('process.processDefinitionName')\">\n        <template slot-scope=\"{row}\">\n          <span>{{ row.name }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column :label=\"$t('process.processDefinitionVersion')\">\n        <template slot-scope=\"{row}\">\n          <el-tag type=\"success\">\n            <span>{{ 'v' + row.version }}</span>\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column :label=\"$t('process.suspended')\">\n        <template slot-scope=\"{row}\">\n          <span v-if=\"row.suspended === false\">{{ $t('common.no') }}</span>\n          <span v-else>{{ $t('common.yes') }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column :label=\"$t('common.operate')\" min-width=\"100px\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"{row}\">\n          <el-button type=\"primary\" size=\"mini\" @click=\"handlePreview(row)\">\n            {{ $t('process.preview') }}\n          </el-button>\n          <el-button type=\"primary\" size=\"mini\" @click=\"handleStart(row)\">\n            {{ $t('process.start') }}\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.currentPage\" :limit.sync=\"listQuery.pageSize\" @pagination=\"getList\" />\n\n    <el-dialog :title=\"textMap[dialogStatus]\" :visible.sync=\"dialogFormVisible\">\n      <el-form ref=\"dataForm\" :rules=\"rules\" :model=\"temp\" label-position=\"right\" label-width=\"90px\" style=\"width: 100%\">\n        <el-form-item :label=\"$t('process.candidate')\" prop=\"candidate\">\n          <el-select v-model=\"temp.candidate\" :placeholder=\"$t('common.choose')\" clearable class=\"filter-item\" style=\"width: 100%\">\n            <el-option-group v-for=\"group in candidateOptions\" :key=\"group.value\" :label=\"group.value\">\n              <el-option v-for=\"item in group.children\" :key=\"item.key\" :label=\"item.value\" :value=\"item.key\" />\n            </el-option-group>\n          </el-select>\n        </el-form-item>\n        <el-form-item :label=\"$t('process.rangeTime')\" prop=\"rangeTime\">\n          <el-date-picker v-model=\"temp.rangeTime\" type=\"datetimerange\" :default-time=\"['08:30:00', '18:00:00']\" style=\"width: 100%\" clearable />\n        </el-form-item>\n        <el-form-item :label=\"$t('process.description')\" prop=\"description\">\n          <el-input v-model=\"temp.description\" type=\"textarea\" :placeholder=\"$t('common.enter')\" maxlength=\"512\" clearable />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">\n          {{ $t('common.cancel') }}\n        </el-button>\n        <el-button type=\"primary\" @click=\"startData()\">\n          {{ $t('common.confirm') }}\n        </el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog fullscreen :visible.sync=\"previewDialogVisible\">\n      <div v-html=\"svgSrc\" />\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport { queryProcessDefinition, queryUsername, getProcessResource, startProcessInstance } from '@/api/activiti'\nimport waves from '@/directive/waves' // waves directive\nimport Pagination from '@/components/Pagination' // secondary package based on el-pagination\n\nexport default {\n  name: 'StartProcess',\n  components: { Pagination },\n  directives: { waves },\n  data() {\n    return {\n      tableKey: 0,\n      list: [],\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        currentPage: 1,\n        pageSize: 10,\n        processDefinitionName: undefined\n      },\n      candidateOptions: [],\n      temp: {\n        id: undefined\n      },\n      dialogFormVisible: false,\n      previewDialogVisible: false,\n      svgSrc: '',\n      dialogStatus: '',\n      textMap: {\n        start: this.$t('route.startprocess')\n      },\n      rules: {\n        candidate: [{ required: true, message: this.$t('process.processCandidate-required'), trigger: 'change' }],\n        rangeTime: [{ required: true, message: this.$t('process.processRangetime-required'), trigger: 'change' }],\n        description: [{ required: true, message: this.$t('process.processDescription-required'), trigger: 'blur' }]\n      },\n      downloadLoading: false\n    }\n  },\n  created() {\n    this.getList()\n  },\n  methods: {\n    getList() {\n      this.listLoading = true\n      queryProcessDefinition(this.listQuery).then(response => {\n        this.list = response.data.list\n        this.total = response.data.pagination.total\n        this.listLoading = false\n      })\n    },\n    handleFilter() {\n      this.listQuery.currentPage = 1\n      this.getList()\n    },\n    handleReset() {\n      this.listQuery.processDefinitionName = ''\n      this.handleFilter()\n    },\n    handleStart(row) {\n      this.temp = Object.assign({}, row) // copy obj\n      this.dialogStatus = 'start'\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        this.$refs['dataForm'].clearValidate()\n      })\n      queryUsername().then(response => {\n        this.candidateOptions = response.data\n      })\n    },\n    handlePreview(row) {\n      this.previewDialogVisible = true\n      getProcessResource(row.deploymentId).then(response => {\n        this.svgSrc = response\n      })\n    },\n    startData() {\n      this.$refs['dataForm'].validate((valid) => {\n        if (valid) {\n          // const tempData = Object.assign({}, this.temp)\n          const tempData = {}\n          tempData.candidate = this.temp.candidate\n          tempData.startTime = this.temp.rangeTime ? this.temp.rangeTime[0] : null\n          tempData.endTime = this.temp.rangeTime ? this.temp.rangeTime[1] : null\n          tempData.description = this.temp.description\n          tempData.customForm = []\n          tempData.processDefinitionId = this.temp.id\n          startProcessInstance(tempData).then(response => {\n            if (response.message === 'success') {\n              this.dialogFormVisible = false\n              this.$notify({\n                title: this.$t('common.success'),\n                message: this.$t('process.startSuccess'),\n                type: 'success',\n                duration: 2000\n              })\n            } else {\n              this.handleWarning(response)\n            }\n          })\n        }\n      })\n    },\n    handleWarning(response) {\n      this.$notify({\n        title: this.$t('common.warning'),\n        message: response.message,\n        type: 'warning',\n        duration: 2000\n      })\n    }\n  }\n}\n</script>\n"]}]}