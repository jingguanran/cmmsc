{"remainingRequest":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\babel-loader\\lib\\index.js!D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\src\\views\\table\\drag-table.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\src\\views\\table\\drag-table.vue","mtime":1596419781064},{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\zyttWork\\MSCode微服务平台-中移铁通有限公司智能产品分公司\\MSCode微服务平台源码和SQL-中移铁通有限公司智能产品分公司\\MSCode微服务平台升级(20200713)-中移铁通有限公司智能产品分公司\\mscodevue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJEOi96eXR0V29yay9NU0NvZGVcdTVGQUVcdTY3MERcdTUyQTFcdTVFNzNcdTUzRjAtXHU0RTJEXHU3OUZCXHU5NEMxXHU5MDFBXHU2NzA5XHU5NjUwXHU1MTZDXHU1M0Y4XHU2NjdBXHU4MEZEXHU0RUE3XHU1NEMxXHU1MjA2XHU1MTZDXHU1M0Y4L01TQ29kZVx1NUZBRVx1NjcwRFx1NTJBMVx1NUU3M1x1NTNGMFx1NkU5MFx1NzgwMVx1NTQ4Q1NRTC1cdTRFMkRcdTc5RkJcdTk0QzFcdTkwMUFcdTY3MDlcdTk2NTBcdTUxNkNcdTUzRjhcdTY2N0FcdTgwRkRcdTRFQTdcdTU0QzFcdTUyMDZcdTUxNkNcdTUzRjgvTVNDb2RlXHU1RkFFXHU2NzBEXHU1MkExXHU1RTczXHU1M0YwXHU1MzQ3XHU3RUE3KDIwMjAwNzEzKS1cdTRFMkRcdTc5RkJcdTk0QzFcdTkwMUFcdTY3MDlcdTk2NTBcdTUxNkNcdTUzRjhcdTY2N0FcdTgwRkRcdTRFQTdcdTU0QzFcdTUyMDZcdTUxNkNcdTUzRjgvbXNjb2RldnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZmV0Y2hMaXN0IH0gZnJvbSAnQC9hcGkvYXJ0aWNsZSc7CmltcG9ydCBTb3J0YWJsZSBmcm9tICdzb3J0YWJsZWpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEcmFnVGFibGUnLAogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcjogZnVuY3Rpb24gc3RhdHVzRmlsdGVyKHN0YXR1cykgewogICAgICB2YXIgc3RhdHVzTWFwID0gewogICAgICAgIHB1Ymxpc2hlZDogJ3N1Y2Nlc3MnLAogICAgICAgIGRyYWZ0OiAnaW5mbycsCiAgICAgICAgZGVsZXRlZDogJ2RhbmdlcicKICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdOwogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IG51bGwsCiAgICAgIHRvdGFsOiBudWxsLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMTAKICAgICAgfSwKICAgICAgc29ydGFibGU6IG51bGwsCiAgICAgIG9sZExpc3Q6IFtdLAogICAgICBuZXdMaXN0OiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldExpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldExpc3Q6IGZ1bmN0aW9uIGdldExpc3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkZmV0Y2hMaXN0LCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5saXN0TG9hZGluZyA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaExpc3QoX3RoaXMubGlzdFF1ZXJ5KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX3lpZWxkJGZldGNoTGlzdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJGZldGNoTGlzdC5kYXRhOwogICAgICAgICAgICAgICAgX3RoaXMubGlzdCA9IGRhdGEuaXRlbXM7CiAgICAgICAgICAgICAgICBfdGhpcy50b3RhbCA9IGRhdGEudG90YWw7CiAgICAgICAgICAgICAgICBfdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMub2xkTGlzdCA9IF90aGlzLmxpc3QubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiB2LmlkOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBfdGhpcy5uZXdMaXN0ID0gX3RoaXMub2xkTGlzdC5zbGljZSgpOwoKICAgICAgICAgICAgICAgIF90aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzLnNldFNvcnQoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNldFNvcnQ6IGZ1bmN0aW9uIHNldFNvcnQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGVsID0gdGhpcy4kcmVmcy5kcmFnVGFibGUuJGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbC10YWJsZV9fYm9keS13cmFwcGVyID4gdGFibGUgPiB0Ym9keScpWzBdOwogICAgICB0aGlzLnNvcnRhYmxlID0gU29ydGFibGUuY3JlYXRlKGVsLCB7CiAgICAgICAgZ2hvc3RDbGFzczogJ3NvcnRhYmxlLWdob3N0JywKICAgICAgICAvLyBDbGFzcyBuYW1lIGZvciB0aGUgZHJvcCBwbGFjZWhvbGRlciwKICAgICAgICBzZXREYXRhOiBmdW5jdGlvbiBzZXREYXRhKGRhdGFUcmFuc2ZlcikgewogICAgICAgICAgLy8gdG8gYXZvaWQgRmlyZWZveCBidWcKICAgICAgICAgIGRhdGFUcmFuc2Zlci5zZXREYXRhKCdUZXh0JywgJycpOwogICAgICAgIH0sCiAgICAgICAgb25FbmQ6IGZ1bmN0aW9uIG9uRW5kKGV2dCkgewogICAgICAgICAgdmFyIHRhcmdldFJvdyA9IF90aGlzMi5saXN0LnNwbGljZShldnQub2xkSW5kZXgsIDEpWzBdOwoKICAgICAgICAgIF90aGlzMi5saXN0LnNwbGljZShldnQubmV3SW5kZXgsIDAsIHRhcmdldFJvdyk7IC8vIGZvciBzaG93IHRoZSBjaGFuZ2VzLCB5b3UgY2FuIGRlbGV0ZSBpbiB5b3UgY29kZQoKCiAgICAgICAgICB2YXIgdGVtcEluZGV4ID0gX3RoaXMyLm5ld0xpc3Quc3BsaWNlKGV2dC5vbGRJbmRleCwgMSlbMF07CgogICAgICAgICAgX3RoaXMyLm5ld0xpc3Quc3BsaWNlKGV2dC5uZXdJbmRleCwgMCwgdGVtcEluZGV4KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["drag-table.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!-- Note that row-key is necessary to get a correct row order. -->\n    <el-table\n      ref=\"dragTable\"\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      row-key=\"id\"\n      border\n      fit\n      highlight-current-row\n      style=\"width: 100%\"\n    >\n      <el-table-column\n        align=\"center\"\n        label=\"ID\"\n        width=\"65\"\n      >\n        <template slot-scope=\"{row}\">\n          <span>{{ row.id }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        width=\"180px\"\n        align=\"center\"\n        label=\"Date\"\n      >\n        <template slot-scope=\"{row}\">\n          <span>{{ row.timestamp | parseTime('{y}-{m}-{d} {h}:{i}') }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        min-width=\"300px\"\n        label=\"Title\"\n      >\n        <template slot-scope=\"{row}\">\n          <span>{{ row.title }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        width=\"110px\"\n        align=\"center\"\n        label=\"Author\"\n      >\n        <template slot-scope=\"{row}\">\n          <span>{{ row.author }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        width=\"100px\"\n        label=\"Importance\"\n      >\n        <template slot-scope=\"{row}\">\n          <svg-icon\n            v-for=\"n in + row.importance\"\n            :key=\"n\"\n            icon-class=\"star\"\n            class=\"icon-star\"\n          />\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        align=\"center\"\n        label=\"Readings\"\n        width=\"95\"\n      >\n        <template slot-scope=\"{row}\">\n          <span>{{ row.pageviews }}</span>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        class-name=\"status-col\"\n        label=\"Status\"\n        width=\"110\"\n      >\n        <template slot-scope=\"{row}\">\n          <el-tag :type=\"row.status | statusFilter\">\n            {{ row.status }}\n          </el-tag>\n        </template>\n      </el-table-column>\n\n      <el-table-column\n        align=\"center\"\n        label=\"Drag\"\n        width=\"80\"\n      >\n        <template slot-scope=\"{}\">\n          <svg-icon\n            class=\"drag-handler\"\n            icon-class=\"drag\"\n          />\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- $t is vue-i18n global function to translate lang (lang in @/lang)  -->\n    <div class=\"show-d\">\n      <el-tag style=\"margin-right:12px;\">{{ $t('table.dragTips1') }} :</el-tag> {{ oldList }}\n    </div>\n    <div class=\"show-d\">\n      <el-tag>{{ $t('table.dragTips2') }} :</el-tag> {{ newList }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fetchList } from '@/api/article'\nimport Sortable from 'sortablejs'\n\nexport default {\n  name: 'DragTable',\n  filters: {\n    statusFilter (status) {\n      const statusMap = {\n        published: 'success',\n        draft: 'info',\n        deleted: 'danger'\n      }\n      return statusMap[status]\n    }\n  },\n  data () {\n    return {\n      list: null,\n      total: null,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 10\n      },\n      sortable: null,\n      oldList: [],\n      newList: []\n    }\n  },\n  created () {\n    this.getList()\n  },\n  methods: {\n    async getList () {\n      this.listLoading = true\n      const { data } = await fetchList(this.listQuery)\n      this.list = data.items\n      this.total = data.total\n      this.listLoading = false\n      this.oldList = this.list.map(v => v.id)\n      this.newList = this.oldList.slice()\n      this.$nextTick(() => {\n        this.setSort()\n      })\n    },\n    setSort () {\n      const el = this.$refs.dragTable.$el.querySelectorAll('.el-table__body-wrapper > table > tbody')[0]\n      this.sortable = Sortable.create(el, {\n        ghostClass: 'sortable-ghost', // Class name for the drop placeholder,\n        setData: function (dataTransfer) {\n          // to avoid Firefox bug\n          dataTransfer.setData('Text', '')\n        },\n        onEnd: evt => {\n          const targetRow = this.list.splice(evt.oldIndex, 1)[0]\n          this.list.splice(evt.newIndex, 0, targetRow)\n\n          // for show the changes, you can delete in you code\n          const tempIndex = this.newList.splice(evt.oldIndex, 1)[0]\n          this.newList.splice(evt.newIndex, 0, tempIndex)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.sortable-ghost {\n  opacity: 0.8;\n  color: #fff !important;\n  background: #42b983 !important;\n}\n</style>\n\n<style scoped>\n.icon-star {\n  margin-right: 2px;\n}\n.drag-handler {\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n}\n.show-d {\n  margin-top: 15px;\n}\n</style>\n"],"sourceRoot":"src/views/table"}]}