{"remainingRequest":"C:\\Users\\jingguanran\\Desktop\\mscodevue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\jingguanran\\Desktop\\mscodevue\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\jingguanran\\Desktop\\mscodevue\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\jingguanran\\Desktop\\mscodevue\\src\\store\\modules\\user.js","mtime":1597221536360},{"path":"C:\\Users\\jingguanran\\Desktop\\mscodevue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\jingguanran\\Desktop\\mscodevue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\jingguanran\\Desktop\\mscodevue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0iOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy9qaW5nZ3VhbnJhbi9EZXNrdG9wL21zY29kZXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgZ2V0SW5mbyBhcyBfZ2V0SW5mbywgZ2V0UHVibGljS2V5IH0gZnJvbSAnQC9hcGkvdXNlcic7CmltcG9ydCB7IGdldFRva2VuLCBzZXRUb2tlbiwgcmVtb3ZlVG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwppbXBvcnQgcm91dGVyLCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwppbXBvcnQgSlNFbmNyeXB0IGZyb20gJ2pzZW5jcnlwdCc7CnZhciBzdGF0ZSA9IHsKICB0b2tlbjogZ2V0VG9rZW4oKSwKICBuYW1lOiAnJywKICBhdmF0YXI6ICcnLAogIGludHJvZHVjdGlvbjogJycsCiAgcm9sZXM6IFtdCn07CnZhciBtdXRhdGlvbnMgPSB7CiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX0lOVFJPRFVDVElPTjogZnVuY3Rpb24gU0VUX0lOVFJPRFVDVElPTihzdGF0ZSwgaW50cm9kdWN0aW9uKSB7CiAgICBzdGF0ZS5pbnRyb2R1Y3Rpb24gPSBpbnRyb2R1Y3Rpb247CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfSwKICBTRVRfUk9MRVM6IGZ1bmN0aW9uIFNFVF9ST0xFUyhzdGF0ZSwgcm9sZXMpIHsKICAgIHN0YXRlLnJvbGVzID0gcm9sZXM7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyB1c2VyIGxvZ2luCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICB2YXIgdGVuYW50Q29kZSA9IHVzZXJJbmZvLnRlbmFudENvZGUsCiAgICAgICAgdXNlcm5hbWUgPSB1c2VySW5mby51c2VybmFtZSwKICAgICAgICBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIHB1YktleSwgZW5jcnlwdFN0ciwgZmluYWxfcGFzc3dvcmQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UHVibGljS2V5KCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHB1YktleSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBlbmNyeXB0U3RyID0gbmV3IEpTRW5jcnlwdCgpOwogICAgICAgICAgICAgICAgZW5jcnlwdFN0ci5zZXRQdWJsaWNLZXkocHViS2V5KTsgLy8g6K6+572uIOWKoOWvhuWFrOmSpQoKICAgICAgICAgICAgICAgIGZpbmFsX3Bhc3N3b3JkID0gZW5jcnlwdFN0ci5lbmNyeXB0KHBhc3N3b3JkLnRvU3RyaW5nKCkpOyAvLyDov5vooYzliqDlr4YKCiAgICAgICAgICAgICAgICBfbG9naW4oewogICAgICAgICAgICAgICAgICB0ZW5hbnRDb2RlOiB0ZW5hbnRDb2RlLnRyaW0oKSwKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnRyaW0oKSwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IGZpbmFsX3Bhc3N3b3JkCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsIHJlc3BvbnNlLmFjY2Vzc190b2tlbik7CiAgICAgICAgICAgICAgICAgIHNldFRva2VuKHJlc3BvbnNlLmFjY2Vzc190b2tlbik7CiAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2dldEluZm8oc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJlamVjdCgn6aqM6K+B5aSx6LSl77yM6K+36YeN5paw55m75b2V44CCJyk7CiAgICAgICAgfQoKICAgICAgICBkYXRhLnJvbGVzID0gWydST0xFX0FETUlOJ107CiAgICAgICAgZGF0YS5uYW1lID0gZGF0YS51c2VybmFtZTsKICAgICAgICBkYXRhLmludHJvZHVjdGlvbiA9IGRhdGEubmlja25hbWU7CiAgICAgICAgdmFyIHJvbGVzID0gZGF0YS5yb2xlcywKICAgICAgICAgICAgbmFtZSA9IGRhdGEubmFtZSwKICAgICAgICAgICAgYXZhdGFyID0gZGF0YS5hdmF0YXIsCiAgICAgICAgICAgIGludHJvZHVjdGlvbiA9IGRhdGEuaW50cm9kdWN0aW9uOwoKICAgICAgICBpZiAoIXJvbGVzIHx8IHJvbGVzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgICByZWplY3QoJ+inkuiJsuW/hemhu+S4uumdnm51bGzmlbDnu4TvvIEnKTsKICAgICAgICB9CgogICAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgcm9sZXMpOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgIGNvbW1pdCgnU0VUX0lOVFJPRFVDVElPTicsIGludHJvZHVjdGlvbik7CiAgICAgICAgcmVzb2x2ZShkYXRhKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHVzZXIgbG9nb3V0CiAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZSwKICAgICAgICBkaXNwYXRjaCA9IF9yZWY0LmRpc3BhdGNoOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOwogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZXNldFJvdXRlcigpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKCiAgICAgIGRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycsIG51bGwsIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjUpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNS5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCAnJyk7CiAgICAgIGNvbW1pdCgnU0VUX1JPTEVTJywgW10pOwogICAgICByZW1vdmVUb2tlbigpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIC8vIGR5bmFtaWNhbGx5IG1vZGlmeSBwZXJtaXNzaW9ucwogIGNoYW5nZVJvbGVzOiBmdW5jdGlvbiBjaGFuZ2VSb2xlcyhfcmVmNiwgcm9sZSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCB0b2tlbiwgX3lpZWxkJGRpc3BhdGNoLCByb2xlcywgYWNjZXNzUm91dGVzOwoKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmNi5jb21taXQsIGRpc3BhdGNoID0gX3JlZjYuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgdG9rZW4gPSByb2xlICsgJy10b2tlbic7CiAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCB0b2tlbik7CiAgICAgICAgICAgICAgc2V0VG9rZW4odG9rZW4pOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2dldEluZm8nKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBfeWllbGQkZGlzcGF0Y2ggPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICByb2xlcyA9IF95aWVsZCRkaXNwYXRjaC5yb2xlczsKICAgICAgICAgICAgICByZXNldFJvdXRlcigpOyAvLyBnZW5lcmF0ZSBhY2Nlc3NpYmxlIHJvdXRlcyBtYXAgYmFzZWQgb24gcm9sZXMKCiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMTsKICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ3Blcm1pc3Npb24vZ2VuZXJhdGVSb3V0ZXMnLCByb2xlcywgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBhY2Nlc3NSb3V0ZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhY2Nlc3NSb3V0ZXMpOyAvLyBkeW5hbWljYWxseSBhZGQgYWNjZXNzaWJsZSByb3V0ZXMKCiAgICAgICAgICAgICAgcm91dGVyLmFkZFJvdXRlcyhhY2Nlc3NSb3V0ZXMpOyAvLyByZXNldCB2aXNpdGVkIHZpZXdzIGFuZCBjYWNoZWQgdmlld3MKCiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbEFsbFZpZXdzJywgbnVsbCwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0KfTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWVzcGFjZWQ6IHRydWUsCiAgc3RhdGU6IHN0YXRlLAogIG11dGF0aW9uczogbXV0YXRpb25zLAogIGFjdGlvbnM6IGFjdGlvbnMKfTs="},{"version":3,"sources":["C:/Users/jingguanran/Desktop/mscodevue/src/store/modules/user.js"],"names":["login","getInfo","getPublicKey","getToken","setToken","removeToken","router","resetRouter","JSEncrypt","state","token","name","avatar","introduction","roles","mutations","SET_TOKEN","SET_INTRODUCTION","SET_NAME","SET_AVATAR","SET_ROLES","actions","userInfo","commit","tenantCode","username","password","Promise","resolve","reject","pubKey","encryptStr","setPublicKey","final_password","encrypt","toString","trim","then","response","access_token","catch","error","data","nickname","length","logout","dispatch","root","resetToken","changeRoles","role","accessRoutes","console","log","addRoutes","namespaced"],"mappings":"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","sourcesContent":["import { login, getInfo, getPublicKey } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport router, { resetRouter } from '@/router'\nimport JSEncrypt from 'jsencrypt';\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n  introduction: '',\n  roles: []\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_INTRODUCTION: (state, introduction) => {\n    state.introduction = introduction\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROLES: (state, roles) => {\n    state.roles = roles\n  }\n}\n\nconst actions = {\n  // user login\n  login ({ commit }, userInfo) {\n    const { tenantCode, username, password } = userInfo\n    return new Promise(async (resolve, reject) => {\n      var pubKey=await getPublicKey()\n      let encryptStr = new JSEncrypt();\n      encryptStr.setPublicKey(pubKey); // 设置 加密公钥\n      let final_password= encryptStr.encrypt( password.toString());  // 进行加密\n      login({ tenantCode: tenantCode.trim(), username: username.trim(), password:final_password}).then(response => {\n        commit('SET_TOKEN', response.access_token)\n        setToken(response.access_token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo ({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const { data } = response\n\n        if (!data) {\n          reject('验证失败，请重新登录。')\n        }\n\n        data.roles = ['ROLE_ADMIN']\n        data.name = data.username\n        data.introduction = data.nickname\n        const { roles, name, avatar, introduction } = data\n\n        if (!roles || roles.length <= 0) {\n          reject('角色必须为非null数组！')\n        }\n\n        commit('SET_ROLES', roles)\n        commit('SET_NAME', name)\n        commit('SET_AVATAR', avatar)\n        commit('SET_INTRODUCTION', introduction)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout ({ commit, state, dispatch }) {\n    return new Promise((resolve, reject) => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resetRouter()\n\n      // reset visited views and cached views\n      dispatch('tagsView/delAllViews', null, { root: true })\n\n      resolve()\n    })\n  },\n\n  // remove token\n  resetToken ({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      commit('SET_ROLES', [])\n      removeToken()\n      resolve()\n    })\n  },\n\n  // dynamically modify permissions\n  async changeRoles ({ commit, dispatch }, role) {\n    const token = role + '-token'\n\n    commit('SET_TOKEN', token)\n    setToken(token)\n\n\n    const { roles } = await dispatch('getInfo')\n    resetRouter()\n\n    // generate accessible routes map based on roles\n    const accessRoutes = await dispatch('permission/generateRoutes', roles, { root: true })\n    console.log(accessRoutes)\n    // dynamically add accessible routes\n    router.addRoutes(accessRoutes)\n\n    // reset visited views and cached views\n    dispatch('tagsView/delAllViews', null, { root: true })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"]}]}